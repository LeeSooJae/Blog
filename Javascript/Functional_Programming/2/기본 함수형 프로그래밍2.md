# 함수형 프로그래밍 전문가 되기 (2 단계)

함수형 프로그래밍 컨셉들을 이해하는 첫 단계가 가장 중요하고 때로는 가장 어려운 단계다.
하지만 올바른 관점으로 접근한다면 그렇게 어렵지 않다.

이전 단계로 가기 : Part 1

앞으로 나올 코드를 천천히 읽어라. 코드를 이해한 다음에 다음으로 넘어가라. 각각에 세션은 이전 세션과 이어진다.

서두르게 되면 나중에 중요해질 뉘앙스를 놓칠 수도 있다.

## 리팩토링

잠시 리팩토링에 대해 생각해보자. 아래 자바스크립트 코드를 살펴보자.


```js
function validateSsn(ssn) {
    if (/^\d{3}-\d{2}-\d{4}$/.exec(ssn))
        console.log('Valid SSN');
    else
        console.log('Invalid SSN');
}
function validatePhone(phone) {
    if (/^\(\d{3}\)\d{3}-\d{4}$/.exec(phone))
        console.log('Valid Phone Number');
    else
        console.log('Invalid Phone Number');
}
```

우리는 이전에 위와 같은 코드를 썼었다. 시간이 흐른뒤 우리는 이 두가지 함수가 몇 가지 차이만 나고, 사실상 동일하다고 깨닫게 된다.(볼드체로 표시한 부분을 보자)

validatePhone 함수를 만들기 위해 validateSSn을 복사/붙여넣기, 그리고 수정을 하는 대신에, 파라미터를 이용해서 단일 함수로 만들어야 한다.



이제 이전 4개 함수에 대해 고차함수를 호출할 수 있다.(자바스크립트에서 동작하는 Regex.exec는 정규식에 일치하는 부분이 있으면 truthy한 값을 반환한다.) 

```js
validateValueWithFunc('123-45-6789', /^\d{3}-\d{2}-\d{4}$/.exec, 'SSN');
validateValueWithFunc('(123)456-7890', /^\(\d{3}\)\d{3}-\d{4}$/.exec, 'Phone');
validateValueWithFunc('123 Main St.', parseAddress, 'Address');
validateValueWithFunc('Joe Mama', parseName, 'Name');
```
